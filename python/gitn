#!/usr/bin/env python3

import subprocess
import pprint

pp = pprint.PrettyPrinter(indent=4).pprint

class bcolors:
    HEADER = "\033[95m"
    OKBLUE = "\033[94m"
    OKCYAN = "\033[96m"
    OKGREEN = "\033[92m"
    WARNING = "\033[93m"
    FAIL = "\033[91m"
    ENDC = "\033[0m"
    BOLD = "\033[1m"
    UNDERLINE = "\033[4m"

ansi = ['\x1b[32m', '\x1b[31m', '\x1b[m']

def run_subprocess(cmd):
    result = []
    process = subprocess.Popen(
        cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True
    )
    if not process.stdout:
        return
    while process.stdout.readable():
        line = process.stdout.readline()
        if not line:
            break
        print(line, end="")
        line = line.strip()
        for i in ansi:
            line = line.replace(i, '')
        result.append(line)
    return result

status = run_subprocess(["git", "-c", "status.color=always", "status"])

pp(status)
